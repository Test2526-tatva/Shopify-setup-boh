<section class='shop-the-look'>
  <div class='shop-the-look__image-container'>
    {% if section.settings.bg_image %}
      <img
        class='shop-the-look__main-image'
        src='{{ section.settings.bg_image | img_url: '1200x1200', crop: 'center' }}'
        alt='{{ section.settings.title }}'
      >
    {% endif %}
  </div>
  <div class='shop-the-look__content'>
    <h1 class='shop-the-look__title'>
      {{ section.settings.title }}
    </h1>
    <p class='shop-the-look__description'>
      {{ section.settings.caption }}
    </p>
    <div class='shop-the-look__product-slider'>
      {% if section.settings.products != blank %}
        <div class='shop-the-look__slider-arrows'>
          <button class='shop-the-look__arrow shop-the-look__arrow--prev' aria-label='Previous product'>
            {% render 'icon-arrow-left' %}
          </button>
          <button class='shop-the-look__arrow shop-the-look__arrow--next' aria-label='Next product'>
            {% render 'icon-arrow-right' %}
          </button>
        </div>
      {% endif %}
      <div class='shop-the-look__product-grid'>
        <div class='product-gallery__carousel swiper'>
          <div class='product-gallery__images swiper-wrapper'>
            {% for product in section.settings.products %}
              <div class='product-gallery__image swiper-slide'>
                {% render 'product-card', product: product %}
              </div>
            {% endfor %}
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

{% comment %}
  <div class="shop-the-look block-padding--{{ section.id }}">
    <h2 class="shop-the-look__title">{{ section.settings.title }}</h2>
    <p class="shop-the-look__caption">{{ section.settings.caption }}</p>
    <div class="shop-the-look__bg-image">{{ section.settings.bg_image }}</div>
    <p class="shop-the-look__bg-video">{{ section.settings.bg_video }}</p>
    <div class="shop-the-look__products">{{ section.settings.products }}</div>

  </div>
{% endcomment %}

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const productSlider = new Swiper('.shop-the-look__product-slider .swiper', {
      slidesPerView: 2,
      spaceBetween: 8,
      navigation: {
        nextEl: '.shop-the-look__arrow--next',
        prevEl: '.shop-the-look__arrow--prev',
      },
    });
  }); // end
</script>

{% render 'block-padding', block: section %}

{% schema %}
{
  "name": "Shop The Look",
  "settings": [
    {
      "id": "title",
      "type": "text",
      "label": "Title"
    },
    {
      "id": "caption",
      "type": "text",
      "label": "Caption"
    },
    {
      "id": "bg_image",
      "type": "image_picker",
      "label": "BG Image"
    },
    {
      "id": "bg_video",
      "type": "text",
      "label": "BG Video"
    },
    {
      "id": "products",
      "type": "product_list",
      "label": "Products",
      "limit": 8
    },
    {
      "type": "header",
      "content": "Padding",
      "info": "Use the fields below to change the top and bottom spacing of the blocks on desktop and mobile."
    },
    {
      "type": "header",
      "content": "Desktop"
    },
    {
      "type": "number",
      "label": "Padding Top",
      "id": "pt",
      "default": -1,
      "info": "Set to -1 for default padding."
    },
    {
      "type": "number",
      "label": "Padding Bottom",
      "id": "pb",
      "default": -1,
      "info": "Set to -1 for default padding."
    },
    {
      "type": "header",
      "content": "Mobile"
    },
    {
      "type": "number",
      "label": "Padding Top",
      "id": "pt_m",
      "default": -1,
      "info": "Set to -1 for default padding."
    },
    {
      "type": "number",
      "label": "Padding Bottom",
      "id": "pb_m",
      "default": -1,
      "info": "Set to -1 for default padding."
    }
  ],
  "blocks": [],
  "presets": [
    {
      "name": "Shop The Look",
      "category": "Image + Text"
    }
  ]
}
{% endschema %}
