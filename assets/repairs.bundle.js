(()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function r(e){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?t(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,i(o.key),o)}}function n(e,t,r){return(t=i(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(t){var r=function(t,r){if("object"!==e(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,"string");if("object"!==e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===e(r)?r:String(r)}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i;return t=e,i=[{key:"init",value:function(){var e=$("[data-repair-products]").text(),t=JSON.parse(e);console.log(t),t=t.reduce((function(e,t){return r(r({},e),{},n({},t.title,t.colour))}),{}),this.products=t,this.initForm()}},{key:"initForm",value:function(){var e=$("#register-product");$('[name="title"]',e).on("change",(function(){var e=$(this).val();$('[name="colour"]').val(""),$("option[data-model]").hide(),$('option[data-model="'.concat(e,'"]')).show()})),$('[name="gifted"]',e).on("change",(function(){$(".register-product__purchase-details").show(),e.toggleClass("is-gifted","TRUE"==$(this).val()),"TRUE"==$(this).val()?($(".show-gifted input, .show-gifted select").prop("required",!0),$(".hide-gifted input, .hide-gifted select").prop("required",!1)):($(".show-gifted input, .show-gifted select").prop("required",!1),$(".hide-gifted input, .hide-gifted select").prop("required",!0))})),e.on("submit",(function(t){t.preventDefault();var r=!0,o=$('[name="purchase_proof"]',e);o.attr("required")&&(o.closest(".form-row").toggleClass("form-row--error",""==o.val().trim()),""==o.val().trim()&&(r=!1)),r&&(e.addClass("is-loading"),$.ajax({type:"POST",data:e.serialize(),url:e.attr("action"),success:function(t){e.removeClass("is-loading"),t.success?window.location.href="/pages/my-products":$(".register-form__message").html("\n              <div>\n                ".concat(t.error||"Some unknown error occurred.","\n              </div>\n            "))}}))}))}}],null&&o(t.prototype,null),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();n(c,"products",void 0),document.addEventListener("DOMContentLoaded",(function(){c.init()})),window.RegisterProduct=c})();